mutate(Year = strftime(Date, format = "%Y"))
## Proportion of survey period that was monitored.
trap_ops <- left_join(date_seq, trap, by = "Date") %>%
mutate(n = coalesce(n, 0)) %>%
group_by(Year) %>%
dplyr::summarize(Start = as.Date(min(Date)),
End   = as.Date(max(Date)),
SamplePeriod = as.numeric((End-Start)+1),
DaysSampled = sum(n)) %>%
mutate(prop.sample.period = DaysSampled/SamplePeriod,
prop.mig.period = DaysSampled/75,
Year  = as.numeric(Year),
Start = format(Start, "%b-%d"),
End   = format(End, "%b-%d"))
## Number of Fish Tallied Annually
annual_tally <- simms_bio %>%
filter(Species == c("CO","CT")) %>%
group_by(Year, Species) %>%
dplyr::summarise(n = n()) %>%
pivot_wider(names_from = "Species", values_from = "n")
## Summary Table
summary_table <- left_join(trap_ops,annual_tally, by = "Year") %>%
filter(!is.na(Year)) %>%
select(1:3,5:9)
colnames(summary_table)
## Prepare Kable Table
kable(summary_table,
"html",
booktabs = T,
align = c("c"),
col.names = c("Year", "Start", "End", "# Days Sampled", "Sample Period", "Migration Period", "CO", "CCT"),
caption = "**Table 1. Annual trap operation period, proportion of operation period that was monitored, proportion of migration period that was monitored (Apr 1 to June 15), and number of Coho Salmon and Coastal Cutthroat Trout that were tallied.**",
digits = 2) %>%
#column_spec(c(1, 3,10,17), bold = TRUE) %>%
kable_styling("striped", full_width =  FALSE,
position = "center",
font_size = 12,
fixed_thead = TRUE) %>%
add_header_above(c(" " = 1, "Sample Period" = 3, "Prop. Sampled (%)"= 2, "# Fish Tallied" =2))
## Summary Table
summary_table <- left_join(trap_ops,annual_tally, by = "Year") %>%
filter(!is.na(Year)) %>%
select(1:3,5:9) %>%
mutate(Total = CO + CT)
colnames(summary_table)
## Prepare Kable Table
kable(summary_table,
"html",
booktabs = T,
align = c("c"),
col.names = c("Year", "Start", "End", "# Days Sampled", "Sample Period", "Migration Period", "CO", "CCT", "Total"),
caption = "**Table 1. Annual trap operation period, proportion of operation period that was monitored, proportion of migration period that was monitored (Apr 1 to June 15), and number of Coho Salmon and Coastal Cutthroat Trout that were tallied.**",
digits = 2) %>%
#column_spec(c(1, 3,10,17), bold = TRUE) %>%
kable_styling("striped", full_width =  FALSE,
position = "center",
font_size = 12,
fixed_thead = TRUE) %>%
add_header_above(c(" " = 1, "Sample Period" = 3, "Prop. Sampled (%)"= 2, "# Fish Tallied" =2))
## Prepare Kable Table
kable(summary_table,
"html",
booktabs = T,
align = c("c"),
col.names = c("Year", "Start", "End", "# Days Sampled", "Sample Period", "Migration Period", "CO", "CCT", "Total"),
caption = "**Table 1. Annual trap operation period, proportion of operation period that was monitored, proportion of migration period that was monitored (Apr 1 to June 15), and number of Coho Salmon and Coastal Cutthroat Trout that were tallied.**",
digits = 2) %>%
#column_spec(c(1, 3,10,17), bold = TRUE) %>%
kable_styling("striped", full_width =  FALSE,
position = "center",
font_size = 12,
fixed_thead = TRUE) %>%
add_header_above(c(" " = 1, "Sample Period" = 3, "Prop. Sampled (%)"= 2, "# Fish Tallied" =3))
## Number of Fish Tallied Annually
annual_tally <- simms_bio %>%
ungroup %>%
filter(Species == c("CO","CT")) %>%
group_by(Year, Species) %>%
dplyr::summarise(n = n()) %>%
pivot_wider(names_from = "Species", values_from = "n")
## Summary Table
summary_table <- left_join(trap_ops,annual_tally, by = "Year") %>%
filter(!is.na(Year)) %>%
select(1:3,5:9) %>%
mutate(Total = CO + CT)
colnames(summary_table)
## Prepare Kable Table
kable(summary_table,
"html",
booktabs = T,
align = c("c"),
col.names = c("Year", "Start", "End", "# Days Sampled", "Sample Period", "Migration Period", "CO", "CCT", "Total"),
caption = "**Table 1. Annual trap operation period, proportion of operation period that was monitored, proportion of migration period that was monitored (Apr 1 to June 15), and number of Coho Salmon and Coastal Cutthroat Trout that were tallied.**",
digits = 2) %>%
#column_spec(c(1, 3,10,17), bold = TRUE) %>%
kable_styling("striped", full_width =  FALSE,
position = "center",
font_size = 12,
fixed_thead = TRUE) %>%
add_header_above(c(" " = 1, "Sample Period" = 3, "Prop. Sampled (%)"= 2, "# Fish Tallied" =3))
annual_tally <- simms_bio %>%
ungroup %>%
filter(Species == c("CO","CT")) %>%
group_by(Year, Species)
annual_tally
View(annual_tally)
## Number of Fish Tallied Annually
annual_tally <- simms_bio %>%
ungroup %>%
filter(Species == c("CO","CT")) %>%
group_by(Year, Species) %>%
dplyr::summarise(n = n()) %>%
pivot_wider(names_from = "Species", values_from = "n")
View(annual_tally)
## Number of Fish Tallied Annually
annual_tally <- simms_bio %>%
ungroup %>%
# filter(Species == c("CO","CT")) %>%
group_by(Year, Species) %>%
dplyr::summarise(n = n()) %>%
pivot_wider(names_from = "Species", values_from = "n")
View(annual_tally)
## Number of Fish Tallied Annually
annual_tally <- simms_bio %>%
ungroup %>%
filter(Species == c("CO","CT")) %>%
group_by(Year, Species) %>%
dplyr::summarise(n = n()) %>%
pivot_wider(names_from = "Species", values_from = "n")
## Number of Fish Tallied Annually
annual_tally <- simms_bio %>%
ungroup %>%
filter(Species == c("CO" |"CT")) %>%
group_by(Year, Species) %>%
dplyr::summarise(n = n()) %>%
pivot_wider(names_from = "Species", values_from = "n")
## Number of Fish Tallied Annually
annual_tally <- simms_bio %>%
ungroup %>%
filter(Species == "CO" | Species == "CT") %>%
group_by(Year, Species) %>%
dplyr::summarise(n = n()) %>%
pivot_wider(names_from = "Species", values_from = "n")
## Summary Table
summary_table <- left_join(trap_ops,annual_tally, by = "Year") %>%
filter(!is.na(Year)) %>%
select(1:3,5:9) %>%
mutate(Total = CO + CT)
colnames(summary_table)
## Prepare Kable Table
kable(summary_table,
"html",
booktabs = T,
align = c("c"),
col.names = c("Year", "Start", "End", "# Days Sampled", "Sample Period", "Migration Period", "CO", "CCT", "Total"),
caption = "**Table 1. Annual trap operation period, proportion of operation period that was monitored, proportion of migration period that was monitored (Apr 1 to June 15), and number of Coho Salmon and Coastal Cutthroat Trout that were tallied.**",
digits = 2) %>%
#column_spec(c(1, 3,10,17), bold = TRUE) %>%
kable_styling("striped", full_width =  FALSE,
position = "center",
font_size = 12,
fixed_thead = TRUE) %>%
add_header_above(c(" " = 1, "Sample Period" = 3, "Prop. Sampled (%)"= 2, "# Fish Tallied" =3))
## Proportion of survey period that was monitored.
trap_ops <- left_join(date_seq, trap, by = "Date") %>%
mutate(n = coalesce(n, 0)) %>%
group_by(Year) %>%
dplyr::summarize(Start = as.Date(min(Date)),
End   = as.Date(max(Date)),
SamplePeriod = as.numeric((End-Start)+1),
DaysSampled = sum(n)) %>%
mutate(prop.sample.period =  label_percent(DaysSampled/SamplePeriod),
prop.mig.period = DaysSampled/75,
Year  = as.numeric(Year),
Start = format(Start, "%b-%d"),
End   = format(End, "%b-%d"))
## Proportion of survey period that was monitored.
trap_ops <- left_join(date_seq, trap, by = "Date") %>%
mutate(n = coalesce(n, 0)) %>%
group_by(Year) %>%
dplyr::summarize(Start = as.Date(min(Date)),
End   = as.Date(max(Date)),
SamplePeriod = as.numeric((End-Start)+1),
DaysSampled = sum(n)) %>%
mutate(prop.sample.period =  percent(DaysSampled/SamplePeriod),
prop.mig.period = DaysSampled/75,
Year  = as.numeric(Year),
Start = format(Start, "%b-%d"),
End   = format(End, "%b-%d"))
## Proportion of survey period that was monitored.
trap_ops <- left_join(date_seq, trap, by = "Date") %>%
mutate(n = coalesce(n, 0)) %>%
group_by(Year) %>%
dplyr::summarize(Start = as.Date(min(Date)),
End   = as.Date(max(Date)),
SamplePeriod = as.numeric((End-Start)+1),
DaysSampled = sum(n)) %>%
mutate(prop.sample.period =  percent(DaysSampled/SamplePeriod),
prop.mig.period = percent(DaysSampled/75),
Year  = as.numeric(Year),
Start = format(Start, "%b-%d"),
End   = format(End, "%b-%d"))
## Number of Fish Tallied Annually
annual_tally <- simms_bio %>%
ungroup %>%
filter(Species == "CO" | Species == "CT") %>%
group_by(Year, Species) %>%
dplyr::summarise(n = n()) %>%
pivot_wider(names_from = "Species", values_from = "n")
## Summary Table
summary_table <- left_join(trap_ops,annual_tally, by = "Year") %>%
filter(!is.na(Year)) %>%
select(1:3,5:9) %>%
mutate(Total = CO + CT)
## Prepare Kable Table
kable(summary_table,
"html",
booktabs = T,
align = c("c"),
col.names = c("Year", "Start", "End", "# Days Sampled", "Sample Period", "Migration Period", "CO", "CCT", "Total"),
caption = "**Table 1. Annual trap operation period, proportion of operation period that was monitored, proportion of migration period that was monitored (Apr 1 to June 15), and number of Coho Salmon and Coastal Cutthroat Trout that were tallied.**",
digits = 2) %>%
#column_spec(c(1, 3,10,17), bold = TRUE) %>%
kable_styling("striped", full_width =  FALSE,
position = "center",
font_size = 12,
fixed_thead = TRUE) %>%
add_header_above(c(" " = 1, "Sample Period" = 3, "Prop. Sampled (%)"= 2, "# Fish Tallied" =3))
## Prepare Kable Table
kable(summary_table,
"html",
booktabs = T,
align = c("c"),
col.names = c("Year", "Start", "End", "# Days Sampled", "Sample Period", "Migration Period", "CO", "CCT", "Total"),
caption = "**Table 1. Annual trap operation period, proportion of operation period that was monitored, proportion of migration period that was monitored (Apr 1 to June 15), and number of Coho Salmon and Coastal Cutthroat Trout that were tallied.**",
digits = 0) %>%
#column_spec(c(1, 3,10,17), bold = TRUE) %>%
kable_styling("striped", full_width =  FALSE,
position = "center",
font_size = 12,
fixed_thead = TRUE) %>%
add_header_above(c(" " = 1, "Sample Period" = 3, "Prop. Sampled (%)"= 2, "# Fish Tallied" =3))
## Prepare Kable Table
kable(summary_table,
"html",
booktabs = T,
align = c("c"),
col.names = c("Year", "Start", "End", "# Days Sampled", "Sample Period", "Migration Period", "CO", "CCT", "Total"),
caption = "**Table 1. Annual trap operation period, proportion of operation period that was monitored, proportion of migration period that was monitored (Apr 1 to June 15), and number of Coho Salmon and Coastal Cutthroat Trout that were tallied.**",
digits = 1) %>%
#column_spec(c(1, 3,10,17), bold = TRUE) %>%
kable_styling("striped", full_width =  FALSE,
position = "center",
font_size = 12,
fixed_thead = TRUE) %>%
add_header_above(c(" " = 1, "Sample Period" = 3, "Prop. Sampled (%)"= 2, "# Fish Tallied" =3))
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
# Chunk 2: prep working environment
## Prepare Working Environment ----
## Clear workspace ##
rm(list = ls())
## This code is to fix a bug in R 2023.06.0+421 <https://github.com/rstudio/rstudio/issues/13188>
options(rstudio.help.showDataPreview = FALSE)
# getOption("rstudio.help.showDataPreview")
## Load Packages and dependencies.
list.of.packages <- c("tidyverse",
"purrr",
"tidyr",
"dplyr",
"scales",
"lubridate",
"reshape2",
"ggplot2",
"readxl",
"openxlsx",
"downloadthis",
"knitr",
"captioner",
"zoo",
"gridExtra",
"plotly",
"htmlwidgets",
"shiny")
## Load any missing packages.
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
## Load Packages
library(tidyverse)
library(purrr)
library(tidyr)
library(dplyr)
library(lubridate)
library(reshape2)
library(ggplot2)
library(scales)
library(readxl)
library(openxlsx)
library(downloadthis)
library(knitr)
library(captioner)
library(zoo)
library(gridExtra)
library(plotly)
library(htmlwidgets)
library(formattable)
library(xfun)
library(kableExtra)
library(shiny)
##  Set up captioner package calls.
fig_nums   <- captioner(prefix = "Figure")
table_nums <- captioner(prefix = "Table")
## Define Working Directory ---
#setwd("C:/Users/evogt/R Analysis/EAV/GitHubMarkdown/Simms/docs")
## Define Input Files
#1 Load Simms Bio Data from all years
#1.1 List of all files in Directory
files_list <- list.files("Data/", pattern = "*.xlsx", full.names = TRUE)
# Use lapply to read in all files and store them as list elements in one list
list_of_dfs <- lapply(as.list(files_list), function(x) readWorkbook(x, sheet = "SimmsBioData"))
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
# Chunk 2: prep working environment
## Prepare Working Environment ----
## Clear workspace ##
rm(list = ls())
## This code is to fix a bug in R 2023.06.0+421 <https://github.com/rstudio/rstudio/issues/13188>
options(rstudio.help.showDataPreview = FALSE)
# getOption("rstudio.help.showDataPreview")
## Load Packages and dependencies.
list.of.packages <- c("tidyverse",
"purrr",
"tidyr",
"dplyr",
"scales",
"lubridate",
"reshape2",
"ggplot2",
"readxl",
"openxlsx",
"downloadthis",
"knitr",
"captioner",
"zoo",
"gridExtra",
"plotly",
"htmlwidgets",
"shiny")
## Load any missing packages.
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
## Load Packages
library(tidyverse)
library(purrr)
library(tidyr)
library(dplyr)
library(lubridate)
library(reshape2)
library(ggplot2)
library(scales)
library(readxl)
library(openxlsx)
library(downloadthis)
library(knitr)
library(captioner)
library(zoo)
library(gridExtra)
library(plotly)
library(htmlwidgets)
library(formattable)
library(xfun)
library(kableExtra)
library(shiny)
##  Set up captioner package calls.
fig_nums   <- captioner(prefix = "Figure")
table_nums <- captioner(prefix = "Table")
## Define Working Directory ---
#setwd("C:/Users/evogt/R Analysis/EAV/GitHubMarkdown/Simms/docs")
## Define Input Files
#1 Load Simms Bio Data from all years
#1.1 List of all files in Directory
files_list <- list.files("Data/", pattern = "*.xlsx", full.names = TRUE)
# Use lapply to read in all files and store them as list elements in one list
list_of_dfs <- lapply(as.list(files_list), function(x) readWorkbook(x, sheet = "SimmsBioData"))
setwd("C:/Users/evogt/R Analysis/EAV/GitHubMarkdown/SimmsCreek/docs")
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
# Chunk 2: prep working environment
## Prepare Working Environment ----
## Clear workspace ##
rm(list = ls())
## This code is to fix a bug in R 2023.06.0+421 <https://github.com/rstudio/rstudio/issues/13188>
options(rstudio.help.showDataPreview = FALSE)
# getOption("rstudio.help.showDataPreview")
## Load Packages and dependencies.
list.of.packages <- c("tidyverse",
"purrr",
"tidyr",
"dplyr",
"scales",
"lubridate",
"reshape2",
"ggplot2",
"readxl",
"openxlsx",
"downloadthis",
"knitr",
"captioner",
"zoo",
"gridExtra",
"plotly",
"htmlwidgets",
"shiny")
## Load any missing packages.
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
## Load Packages
library(tidyverse)
library(purrr)
library(tidyr)
library(dplyr)
library(lubridate)
library(reshape2)
library(ggplot2)
library(scales)
library(readxl)
library(openxlsx)
library(downloadthis)
library(knitr)
library(captioner)
library(zoo)
library(gridExtra)
library(plotly)
library(htmlwidgets)
library(formattable)
library(xfun)
library(kableExtra)
library(shiny)
##  Set up captioner package calls.
fig_nums   <- captioner(prefix = "Figure")
table_nums <- captioner(prefix = "Table")
## Define Working Directory ---
#setwd("C:/Users/evogt/R Analysis/EAV/GitHubMarkdown/Simms/docs")
## Define Input Files
#1 Load Simms Bio Data from all years
#1.1 List of all files in Directory
files_list <- list.files("Data/", pattern = "*.xlsx", full.names = TRUE)
# Use lapply to read in all files and store them as list elements in one list
list_of_dfs <- lapply(as.list(files_list), function(x) readWorkbook(x, sheet = "SimmsBioData"))
setwd("C:/Users/evogt/R Analysis/EAV/GitHubMarkdown/SimmsCreek/docs")
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
## Prepare Working Environment ----
## Clear workspace ##
rm(list = ls())
## This code is to fix a bug in R 2023.06.0+421 <https://github.com/rstudio/rstudio/issues/13188>
options(rstudio.help.showDataPreview = FALSE)
# getOption("rstudio.help.showDataPreview")
## Load Packages and dependencies.
list.of.packages <- c("tidyverse",
"purrr",
"tidyr",
"dplyr",
"scales",
"lubridate",
"reshape2",
"ggplot2",
"readxl",
"openxlsx",
"downloadthis",
"knitr",
"captioner",
"zoo",
"gridExtra",
"plotly",
"htmlwidgets",
"shiny")
## Load any missing packages.
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
## Load Packages
library(tidyverse)
library(purrr)
library(tidyr)
library(dplyr)
library(lubridate)
library(reshape2)
library(ggplot2)
library(scales)
library(readxl)
library(openxlsx)
library(downloadthis)
library(knitr)
library(captioner)
library(zoo)
library(gridExtra)
library(plotly)
library(htmlwidgets)
library(formattable)
library(xfun)
library(kableExtra)
library(shiny)
##  Set up captioner package calls.
fig_nums   <- captioner(prefix = "Figure")
table_nums <- captioner(prefix = "Table")
## Define Working Directory ---
#setwd("C:/Users/evogt/R Analysis/EAV/GitHubMarkdown/Simms/docs")
## Define Input Files
#1 Load Simms Bio Data from all years
#1.1 List of all files in Directory
files_list <- list.files("Data/", pattern = "*.xlsx", full.names = TRUE)
# Use lapply to read in all files and store them as list elements in one list
list_of_dfs <- lapply(as.list(files_list), function(x) readWorkbook(x, sheet = "SimmsBioData"))
